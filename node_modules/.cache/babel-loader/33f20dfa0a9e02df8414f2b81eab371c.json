{"ast":null,"code":"import axios from \"axios\";\n\nconst getUserSpotify = token => {\n  return axios.get(\"https://api.spotify.com/v1/me\", {\n    headers: {\n      \"Authorization\": `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(response => response.data);\n};\n\nconst createUserService = userObj => {\n  // console.log(userObj)\n  return axios.post(\"http://localhost:3000/api/createUser\", userObj).then(response => response.data).catch(err => {\n    console.log(`Server Error: Unable to create new user\\nError: ${err}`);\n  });\n};\n\nconst authUser = loginFormData => {\n  return axios.post(\"/api/login\", loginFormData).then(response => response.data).catch(err => {\n    console.log(`Error when making user login: ${err}`);\n  });\n};\n\nconst searchService = (searchQuery, token) => {\n  console.log(`Searchservice: ${searchQuery}`);\n  const urlParam = new URLSearchParams({\n    query: `${searchQuery}`,\n    type: \"track\",\n    limit: 50\n  });\n  console.log(`From the service: https://api.spotify.com/v1/search?${urlParam}`);\n  return axios.get(`https://api.spotify.com/v1/search?${urlParam}`, {\n    headers: {\n      \"Authorization\": `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(response => response.data).catch(err => {\n    console.log(`Got error when searching at spotify: Error: ${err}`);\n\n    if (err.response.status === 401) {\n      console.log(`bad token`);\n    }\n  });\n};\n\nconst getNewToken = refresh_token => {\n  return axios.post(\"/api/refreshToken\", {\n    refresh_token\n  }).then(response => {\n    console.log(`From getNewToken: ${response.data.token.access_token}`);\n    return response.data.token.access_token;\n  }).catch(err => {\n    console.log(`Error received from node server when it was getting token from spotify`);\n  });\n};\n\nconst getGenres = token => {\n  return axios.get(\"https://api.spotify.com/v1/recommendations/available-genre-seeds\", {\n    headers: {\n      \"Authorization\": `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(response => response.data).catch(err => {\n    console.log(`Error when getting the genre seeds from spotify: ${err}`);\n  });\n};\n\nconst getGenreTracks = (token, genre) => {\n  const urlParam = new URLSearchParams({\n    seed_genres: genre,\n    limit: 20\n  });\n  return axios.get(`https://api.spotify.com/v1/recommendations?${urlParam}`, {\n    headers: {\n      \"Authorization\": `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(response => response.data).catch(err => {\n    console.log(`Error when getting songs from a genre: ${err}`);\n  });\n};\n\nconst createRecommend = (email, track) => {\n  return axios.post(`/api/createRecommend`, {\n    email,\n    track\n  }).then(response => response.data).catch(err => {\n    console.log(`Error when creating recommend - music-services ${err}`);\n  });\n};\n\nexport { createRecommend, getGenreTracks, getUserSpotify, createUserService, authUser, searchService, getNewToken, getGenres };","map":{"version":3,"sources":["/Users/rachitbartwal/Desktop/coding/MUSIC-SHARE/backend/frontend/src/services/music_services.js"],"names":["axios","getUserSpotify","token","get","headers","then","response","data","createUserService","userObj","post","catch","err","console","log","authUser","loginFormData","searchService","searchQuery","urlParam","URLSearchParams","query","type","limit","status","getNewToken","refresh_token","access_token","getGenres","getGenreTracks","genre","seed_genres","createRecommend","email","track"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,cAAc,GAAIC,KAAD,IAAW;AAC9B,SACIF,KAAK,CACAG,GADL,CACS,+BADT,EAC0C;AAClCC,IAAAA,OAAO,EAAE;AACL,uBAAkB,UAASF,KAAM,EAD5B;AAEL,sBAAgB;AAFX;AADyB,GAD1C,EAOKG,IAPL,CAOUC,QAAQ,IAAEA,QAAQ,CAACC,IAP7B,CADJ;AAUH,CAXD;;AAYA,MAAMC,iBAAiB,GAAGC,OAAO,IAAI;AACjC;AACA,SACIT,KAAK,CACAU,IADL,CACU,sCADV,EACkDD,OADlD,EAEKJ,IAFL,CAEWC,QAAQ,IAAIA,QAAQ,CAACC,IAFhC,EAGKI,KAHL,CAGWC,GAAG,IAAE;AACRC,IAAAA,OAAO,CAACC,GAAR,CAAa,mDAAkDF,GAAI,EAAnE;AACH,GALL,CADJ;AASH,CAXD;;AAYA,MAAMG,QAAQ,GAAGC,aAAa,IAAI;AAC9B,SACIhB,KAAK,CACAU,IADL,CACU,YADV,EACwBM,aADxB,EAEKX,IAFL,CAEWC,QAAQ,IAAIA,QAAQ,CAACC,IAFhC,EAGKI,KAHL,CAGYC,GAAG,IAAI;AACXC,IAAAA,OAAO,CAACC,GAAR,CAAa,iCAAgCF,GAAI,EAAjD;AACH,GALL,CADJ;AAQH,CATD;;AAUA,MAAMK,aAAa,GAAG,CAACC,WAAD,EAAchB,KAAd,KAAwB;AAC1CW,EAAAA,OAAO,CAACC,GAAR,CAAa,kBAAiBI,WAAY,EAA1C;AACA,QAAMC,QAAQ,GAAG,IAAIC,eAAJ,CAAoB;AACjCC,IAAAA,KAAK,EAAG,GAAEH,WAAY,EADW;AAEjCI,IAAAA,IAAI,EAAE,OAF2B;AAGjCC,IAAAA,KAAK,EAAE;AAH0B,GAApB,CAAjB;AAKAV,EAAAA,OAAO,CAACC,GAAR,CAAa,uDAAsDK,QAAS,EAA5E;AACA,SACInB,KAAK,CACAG,GADL,CACU,qCAAoCgB,QAAS,EADvD,EAC0D;AAClDf,IAAAA,OAAO,EAAE;AACL,uBAAkB,UAASF,KAAM,EAD5B;AAEL,sBAAgB;AAFX;AADyC,GAD1D,EAOKG,IAPL,CAOUC,QAAQ,IAAEA,QAAQ,CAACC,IAP7B,EAQKI,KARL,CAQWC,GAAG,IAAI;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAa,+CAA8CF,GAAI,EAA/D;;AACA,QAAGA,GAAG,CAACN,QAAJ,CAAakB,MAAb,KAAwB,GAA3B,EAA+B;AAC3BX,MAAAA,OAAO,CAACC,GAAR,CAAa,WAAb;AACH;AACJ,GAbL,CADJ;AAgBH,CAxBD;;AAyBA,MAAMW,WAAW,GAAIC,aAAD,IAAmB;AACnC,SACI1B,KAAK,CACAU,IADL,CACU,mBADV,EAC+B;AACvBgB,IAAAA;AADuB,GAD/B,EAIKrB,IAJL,CAIWC,QAAQ,IAAI;AACfO,IAAAA,OAAO,CAACC,GAAR,CAAa,qBAAoBR,QAAQ,CAACC,IAAT,CAAcL,KAAd,CAAoByB,YAAa,EAAlE;AACA,WAAQrB,QAAQ,CAACC,IAAT,CAAcL,KAAd,CAAoByB,YAA5B;AACH,GAPL,EAQKhB,KARL,CAQYC,GAAG,IAAI;AACXC,IAAAA,OAAO,CAACC,GAAR,CAAa,wEAAb;AACH,GAVL,CADJ;AAaH,CAdD;;AAeA,MAAMc,SAAS,GAAI1B,KAAD,IAAW;AACzB,SACIF,KAAK,CACAG,GADL,CACS,kEADT,EAC6E;AACrEC,IAAAA,OAAO,EAAC;AACJ,uBAAkB,UAASF,KAAM,EAD7B;AAEJ,sBAAgB;AAFZ;AAD6D,GAD7E,EAOKG,IAPL,CAOUC,QAAQ,IAAIA,QAAQ,CAACC,IAP/B,EAQKI,KARL,CAQWC,GAAG,IAAG;AACTC,IAAAA,OAAO,CAACC,GAAR,CAAa,oDAAmDF,GAAI,EAApE;AACH,GAVL,CADJ;AAcH,CAfD;;AAgBA,MAAMiB,cAAc,GAAG,CAAC3B,KAAD,EAAQ4B,KAAR,KAAkB;AACrC,QAAMX,QAAQ,GAAG,IAAIC,eAAJ,CAAoB;AACjCW,IAAAA,WAAW,EAAED,KADoB;AAEjCP,IAAAA,KAAK,EAAE;AAF0B,GAApB,CAAjB;AAIA,SACIvB,KAAK,CACAG,GADL,CACU,8CAA6CgB,QAAS,EADhE,EACmE;AAC3Df,IAAAA,OAAO,EAAC;AACJ,uBAAkB,UAASF,KAAM,EAD7B;AAEJ,sBAAgB;AAFZ;AADmD,GADnE,EAOKG,IAPL,CAOUC,QAAQ,IAAEA,QAAQ,CAACC,IAP7B,EAQKI,KARL,CAQWC,GAAG,IAAE;AACRC,IAAAA,OAAO,CAACC,GAAR,CAAa,0CAAyCF,GAAI,EAA1D;AACH,GAVL,CADJ;AAaH,CAlBD;;AAmBA,MAAMoB,eAAe,GAAG,CAACC,KAAD,EAAQC,KAAR,KAAkB;AACtC,SACIlC,KAAK,CACAU,IADL,CACW,sBADX,EACkC;AAC1BuB,IAAAA,KAD0B;AAE1BC,IAAAA;AAF0B,GADlC,EAKK7B,IALL,CAKUC,QAAQ,IAAIA,QAAQ,CAACC,IAL/B,EAMKI,KANL,CAMWC,GAAG,IAAE;AACRC,IAAAA,OAAO,CAACC,GAAR,CAAa,kDAAiDF,GAAI,EAAlE;AACH,GARL,CADJ;AAWH,CAZD;;AAaA,SAAQoB,eAAR,EAAyBH,cAAzB,EAAyC5B,cAAzC,EAAyDO,iBAAzD,EAA4EO,QAA5E,EAAsFE,aAAtF,EAAqGQ,WAArG,EAAkHG,SAAlH","sourcesContent":["import axios from \"axios\"\n\nconst getUserSpotify = (token) => {\n    return(\n        axios\n            .get(\"https://api.spotify.com/v1/me\", {\n                headers: {\n                    \"Authorization\": `Bearer ${token}`,\n                    \"Content-Type\": \"application/json\"\n                }\n            })\n            .then(response=>response.data)\n    )\n}\nconst createUserService = userObj => {\n    // console.log(userObj)\n    return(\n        axios\n            .post(\"http://localhost:3000/api/createUser\", userObj)\n            .then( response => response.data)\n            .catch(err=>{\n                console.log(`Server Error: Unable to create new user\\nError: ${err}`)\n            })\n            \n    )\n}\nconst authUser = loginFormData => {\n    return(\n        axios\n            .post(\"/api/login\", loginFormData)\n            .then( response => response.data)\n            .catch( err => {\n                console.log(`Error when making user login: ${err}`)\n            })\n    )    \n}\nconst searchService = (searchQuery, token) => {\n    console.log(`Searchservice: ${searchQuery}`)\n    const urlParam = new URLSearchParams({\n        query: `${searchQuery}`,\n        type: \"track\",\n        limit: 50\n    })\n    console.log(`From the service: https://api.spotify.com/v1/search?${urlParam}`)\n    return(\n        axios\n            .get(`https://api.spotify.com/v1/search?${urlParam}`, {\n                headers: {\n                    \"Authorization\": `Bearer ${token}`,\n                    \"Content-Type\": \"application/json\"\n                }\n            })\n            .then(response=>response.data)\n            .catch(err => {\n                console.log(`Got error when searching at spotify: Error: ${err}`)\n                if(err.response.status === 401){\n                    console.log(`bad token`)\n                }\n            })\n    )\n}\nconst getNewToken = (refresh_token) => {\n    return(\n        axios\n            .post(\"/api/refreshToken\", {\n                refresh_token\n            })\n            .then( response => {\n                console.log(`From getNewToken: ${response.data.token.access_token}`)\n                return (response.data.token.access_token)\n            })\n            .catch( err => {\n                console.log(`Error received from node server when it was getting token from spotify`)\n            })\n    )\n}\nconst getGenres = (token) => {\n    return(\n        axios\n            .get(\"https://api.spotify.com/v1/recommendations/available-genre-seeds\", {\n                headers:{\n                    \"Authorization\": `Bearer ${token}`,\n                    \"Content-Type\": \"application/json\"\n                }\n            })\n            .then(response => response.data)\n            .catch(err=> {\n                console.log(`Error when getting the genre seeds from spotify: ${err}`)\n            })\n\n    )\n}\nconst getGenreTracks = (token, genre) => {\n    const urlParam = new URLSearchParams({\n        seed_genres: genre,\n        limit: 20\n    })\n    return(\n        axios\n            .get(`https://api.spotify.com/v1/recommendations?${urlParam}`, {\n                headers:{\n                    \"Authorization\": `Bearer ${token}`,\n                    \"Content-Type\": \"application/json\"\n                }\n            })\n            .then(response=>response.data)\n            .catch(err=>{\n                console.log(`Error when getting songs from a genre: ${err}`)\n            })\n    )\n}\nconst createRecommend = (email, track) => {\n    return(\n        axios\n            .post(`/api/createRecommend`, {\n                email,\n                track\n            })\n            .then(response => response.data)\n            .catch(err=>{\n                console.log(`Error when creating recommend - music-services ${err}`)\n            })\n    )\n}\nexport {createRecommend, getGenreTracks, getUserSpotify, createUserService, authUser, searchService, getNewToken, getGenres}"]},"metadata":{},"sourceType":"module"}